# Python ç±»å‹æ³¨è§£å®Œå…¨æŒ‡å—

> æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„é‡è¦å·¥å…·

---

## ğŸ“‹ ç›®å½•

- [1. ç±»å‹æ³¨è§£åŸºç¡€](#1-ç±»å‹æ³¨è§£åŸºç¡€)
- [2. åŸºç¡€ç±»å‹](#2-åŸºç¡€ç±»å‹)
- [3. typing æ¨¡å—](#3-typing-æ¨¡å—)
- [4. æ³›å‹](#4-æ³›å‹)
- [5. å‡½æ•°ç±»å‹](#5-å‡½æ•°ç±»å‹)
- [6. ç±»å’Œåè®®](#6-ç±»å’Œåè®®)
- [7. é«˜çº§ç‰¹æ€§](#7-é«˜çº§ç‰¹æ€§)
- [8. AgentScope ä¸­çš„åº”ç”¨](#8-agentscope-ä¸­çš„åº”ç”¨)
- [9. ç»ƒä¹ é¢˜åŠç­”æ¡ˆ](#9-ç»ƒä¹ é¢˜åŠç­”æ¡ˆ)
- [10. æœ€ä½³å®è·µ](#10-æœ€ä½³å®è·µ)

---

## 1. ç±»å‹æ³¨è§£åŸºç¡€

### 1.1 ä»€ä¹ˆæ˜¯ç±»å‹æ³¨è§£ï¼Ÿ

**ç±»å‹æ³¨è§£ï¼ˆType Hintsï¼‰**æ˜¯ Python 3.5+ å¼•å…¥çš„ç‰¹æ€§ï¼Œç”¨äº**æ˜¾å¼å£°æ˜å˜é‡ã€å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹**ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ç±»å‹æ³¨è§£çš„å¥½å¤„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  1. æé«˜ä»£ç å¯è¯»æ€§                                  â”‚
â”‚  2. æ”¯æŒ IDE è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥                      â”‚
â”‚  3. å‡å°‘è¿è¡Œæ—¶é”™è¯¯                                  â”‚
â”‚  4. æ”¹å–„ä»£ç æ–‡æ¡£                                    â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 åŸºæœ¬è¯­æ³•

```python
# ========== å˜é‡æ³¨è§£ ==========
name: str = "Alice"
age: int = 30
height: float = 1.75
is_student: bool = True

# ========== å‡½æ•°æ³¨è§£ ==========
def greet(name: str) -> str:
    return f"Hello, {name}!"

def add(a: int, b: int) -> int:
    return a + b

# ========== å¤šä¸ªè¿”å›å€¼ ==========
def divide(a: int, b: int) -> tuple[int, int]:
    """è¿”å›å•†å’Œä½™æ•°"""
    return a // b, a % b

# ========== æ— è¿”å›å€¼ ==========
def print_message(message: str) -> None:
    print(message)
```

### 1.3 ç±»å‹æ³¨è§£çš„ä½œç”¨

```python
# ========== æ²¡æœ‰ç±»å‹æ³¨è§£ ==========
def process(data):
    return data.upper()

# é—®é¢˜ï¼šä¸æ¸…æ¥š data åº”è¯¥æ˜¯ä»€ä¹ˆç±»å‹


# ========== æœ‰ç±»å‹æ³¨è§£ ==========
def process(data: str) -> str:
    return data.upper()

# æ¸…æ¥šï¼šdata åº”è¯¥æ˜¯å­—ç¬¦ä¸²ï¼Œè¿”å›ä¹Ÿæ˜¯å­—ç¬¦ä¸²
```

---

## 2. åŸºç¡€ç±»å‹

### 2.1 å†…ç½®ç±»å‹

```python
# ========== åŸºæœ¬ç±»å‹ ==========
# å­—ç¬¦ä¸²
name: str = "Alice"

# æ•´æ•°
count: int = 42

# æµ®ç‚¹æ•°
price: float = 19.99

# å¸ƒå°”å€¼
is_active: bool = True

# å­—èŠ‚
data: bytes = b"hello"

# ========== å®¹å™¨ç±»å‹ ==========
# åˆ—è¡¨
numbers: list = [1, 2, 3]
names: list[str] = ["Alice", "Bob"]

# å­—å…¸
config: dict = {"key": "value"}
user_info: dict[str, str] = {"name": "Alice", "email": "alice@example.com"}

# å…ƒç»„
point: tuple = (1, 2)
coordinates: tuple[int, int, int] = (1, 2, 3)

# é›†åˆ
unique_numbers: set = {1, 2, 3}
tags: set[str] = {"python", "async", "api"}

# å¯é€‰ç±»å‹
maybe_name: str | None = None
```

### 2.2 ç±»å‹åˆ«å

```python
# ========== å®šä¹‰ç±»å‹åˆ«å ==========
UserId = int
UserName = str
UserInfo = dict[str, str | int]

def get_user(user_id: UserId) -> UserInfo:
    return {
        "id": user_id,
        "name": "Alice",
        "age": 30,
    }

# ========== å¤æ‚ç±»å‹åˆ«å ==========
from typing import TypedDict

class User(TypedDict):
    id: int
    name: str
    email: str

UserList = list[User]

def get_users() -> UserList:
    return [
        {"id": 1, "name": "Alice", "email": "alice@example.com"},
        {"id": 2, "name": "Bob", "email": "bob@example.com"},
    ]
```

---

## 3. typing æ¨¡å—

### 3.1 å¸¸ç”¨ç±»å‹

```python
from typing import Optional, List, Dict, Tuple, Set, Union

# ========== Optionalï¼ˆå¯é€‰ç±»å‹ï¼‰==========
# Optional[X] ç­‰ä»·äº X | None
def find_user(user_id: int) -> Optional[str]:
    """æŸ¥æ‰¾ç”¨æˆ·ï¼Œæ‰¾ä¸åˆ°è¿”å› None"""
    if user_id == 1:
        return "Alice"
    return None

# ========== Unionï¼ˆè”åˆç±»å‹ï¼‰==========
def process_value(value: Union[int, str]) -> str:
    """å¤„ç†æ•´æ•°æˆ–å­—ç¬¦ä¸²"""
    return str(value)

# Python 3.10+ å¯ä»¥ä½¿ç”¨ | è¯­æ³•
def process_value_modern(value: int | str) -> str:
    return str(value)

# ========== Listï¼ˆåˆ—è¡¨ï¼‰==========
def get_numbers() -> List[int]:
    return [1, 2, 3, 4, 5]

def get_names() -> List[str]:
    return ["Alice", "Bob", "Charlie"]

# ========== Dictï¼ˆå­—å…¸ï¼‰==========
def get_config() -> Dict[str, str]:
    return {
        "host": "localhost",
        "port": "8080",
    }

def get_user_map() -> Dict[int, str]:
    return {
        1: "Alice",
        2: "Bob",
    }

# ========== Tupleï¼ˆå…ƒç»„ï¼‰==========
def get_point() -> Tuple[int, int]:
    return (10, 20)

def get_user_info() -> Tuple[str, int, bool]:
    return ("Alice", 30, True)

# ========== Setï¼ˆé›†åˆï¼‰==========
def get_tags() -> Set[str]:
    return {"python", "async", "api"}
```

### 3.2 Any å’Œ NoReturn

```python
from typing import Any, NoReturn

# ========== Anyï¼ˆä»»æ„ç±»å‹ï¼‰==========
def process_any(value: Any) -> Any:
    """æ¥å—ä»»ä½•ç±»å‹ï¼Œè¿”å›ä»»ä½•ç±»å‹"""
    return value

# è°¨æ…ä½¿ç”¨ Anyï¼šå¤±å»äº†ç±»å‹æ£€æŸ¥çš„å¥½å¤„


# ========== NoReturnï¼ˆæ°¸ä¸è¿”å›ï¼‰==========
def raise_error() -> NoReturn:
    """æŠ›å‡ºå¼‚å¸¸ï¼Œæ°¸ä¸è¿”å›"""
    raise ValueError("Something went wrong")

def exit_program() -> NoReturn:
    """é€€å‡ºç¨‹åºï¼Œæ°¸ä¸è¿”å›"""
    import sys
    sys.exit(1)
```

### 3.3 Callableï¼ˆå¯è°ƒç”¨å¯¹è±¡ï¼‰

```python
from typing import Callable

# ========== åŸºæœ¬ç”¨æ³• ==========
def apply_function(
    func: Callable[[int, int], int],
    a: int,
    b: int,
) -> int:
    """åº”ç”¨ä¸€ä¸ªå‡½æ•°"""
    return func(a, b)

def add(x: int, y: int) -> int:
    return x + y

result = apply_function(add, 10, 20)  # 30

# ========== æ— å‚æ•°å‡½æ•° ==========
def call_function(func: Callable[[], str]) -> str:
    """è°ƒç”¨æ— å‚æ•°å‡½æ•°"""
    return func()

def get_message() -> str:
    return "Hello"

# ========== å¯å˜å‚æ•°å‡½æ•° ==========
def map_function(
    func: Callable[[int], str],
    values: List[int],
) -> List[str]:
    """æ˜ å°„å‡½æ•°åˆ°åˆ—è¡¨"""
    return [func(v) for v in values]

result = map_function(str, [1, 2, 3])  # ['1', '2', '3']
```

---

## 4. æ³›å‹

### 4.1 åŸºæœ¬æ³›å‹

```python
from typing import TypeVar, Generic

# ========== å®šä¹‰ç±»å‹å˜é‡ ==========
T = TypeVar('T')  # ä»»æ„ç±»å‹

# ========== æ³›å‹å‡½æ•° ==========
def first(items: List[T]) -> T:
    """è¿”å›åˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ """
    return items[0]

# ä½¿ç”¨
first_item: int = first([1, 2, 3])  # int
first_name: str = first(["Alice", "Bob"])  # str

# ========== å¤šä¸ªç±»å‹å˜é‡ ==========
K = TypeVar('K')  # é”®ç±»å‹
V = TypeVar('V')  # å€¼ç±»å‹

def get_item(mapping: Dict[K, V], key: K) -> V:
    """ä»å­—å…¸è·å–å€¼"""
    return mapping[key]

# ä½¿ç”¨
name: str = get_item({1: "Alice"}, 1)
age: int = get_item({"Alice": 30}, "Alice")
```

### 4.2 æ³›å‹ç±»

```python
from typing import TypeVar, Generic

T = TypeVar('T')

class Container(Generic[T]):
    """æ³›å‹å®¹å™¨"""

    def __init__(self, value: T):
        self.value = value

    def get(self) -> T:
        return self.value

    def set(self, value: T) -> None:
        self.value = value

# ä½¿ç”¨
int_container: Container[int] = Container(42)
str_container: Container[str] = Container("hello")

value1: int = int_container.get()
value2: str = str_container.get()
```

### 4.3 çº¦æŸç±»å‹å˜é‡

```python
from typing import TypeVar

# ========== çº¦æŸä¸ºç‰¹å®šç±»å‹ ==========
T = TypeVar('T', int, str, float)  # T åªèƒ½æ˜¯ int, str, float

def process(value: T) -> T:
    return value

process(42)      # OK
process("hello") # OK
# process([])    # é”™è¯¯ï¼šlist ä¸åœ¨çº¦æŸä¸­


# ========== çº¦æŸä¸ºæœ‰å…±åŒæ–¹æ³•çš„ç±»å‹ ==========
class Printable:
    def print(self) -> None:
        pass

T = TypeVar('T', bound=Printable)

def print_object(obj: T) -> None:
    obj.print()
```

---

## 5. å‡½æ•°ç±»å‹

### 5.1 é«˜é˜¶å‡½æ•°

```python
from typing import Callable, List

# ========== å‡½æ•°ä½œä¸ºå‚æ•° ==========
def apply(
    func: Callable[[int], int],
    value: int,
) -> int:
    """åº”ç”¨å‡½æ•°åˆ°å€¼"""
    return func(value)

def square(x: int) -> int:
    return x ** 2

result = apply(square, 5)  # 25

# ========== è¿”å›å‡½æ•° ==========
def get_multiplier(factor: int) -> Callable[[int], int]:
    """è¿”å›ä¹˜æ³•å‡½æ•°"""
    def multiplier(x: int) -> int:
        return x * factor
    return multiplier

times_3: Callable[[int], int] = get_multiplier(3)
result = times_3(5)  # 15
```

### 5.2 è£…é¥°å™¨ç±»å‹

```python
from typing import Callable, TypeVar

F = TypeVar('F', bound=Callable[..., Any])

def log_decorator(func: F) -> F:
    """æ—¥å¿—è£…é¥°å™¨"""
    def wrapper(*args, **kwargs):
        print(f"è°ƒç”¨ {func.__name__}")
        result = func(*args, **kwargs)
        return result
    return wrapper  # type: ignore

@log_decorator
def greet(name: str) -> str:
    return f"Hello, {name}!"
```

---

## 6. ç±»å’Œåè®®

### 6.1 ç±»å±æ€§æ³¨è§£

```python
class User:
    """ç”¨æˆ·ç±»"""

    def __init__(
        self,
        name: str,
        age: int,
        email: str,
    ):
        self.name: str = name
        self.age: int = age
        self.email: str = email

    def get_info(self) -> str:
        return f"{self.name}, {self.age} years old"

# ä½¿ç”¨
user: User = User("Alice", 30, "alice@example.com")
info: str = user.get_info()
```

### 6.2 dataclass

```python
from dataclasses import dataclass

@dataclass
class User:
    """ç”¨æˆ·æ•°æ®ç±»"""
    name: str
    age: int
    email: str
    is_active: bool = True

# è‡ªåŠ¨ç”Ÿæˆ __init__, __repr__ ç­‰æ–¹æ³•
user: User = User(
    name="Alice",
    age=30,
    email="alice@example.com",
)
print(user)  # User(name='Alice', age=30, email='alice@example.com', is_active=True)
```

### 6.3 Protocolï¼ˆåè®®ï¼‰

```python
from typing import Protocol

class Printable(Protocol):
    """å¯æ‰“å°åè®®"""
    def print(self) -> None:
        ...

class Document:
    """æ–‡æ¡£ç±»"""
    def print(self) -> None:
        print("æ‰“å°æ–‡æ¡£")

class Image:
    """å›¾ç‰‡ç±»"""
    def print(self) -> None:
        print("æ‰“å°å›¾ç‰‡")

def print_object(obj: Printable) -> None:
    obj.print()

# ä½¿ç”¨
doc: Document = Document()
img: Image = Image()

print_object(doc)  # æ‰“å°æ–‡æ¡£
print_object(img)  # æ‰“å°å›¾ç‰‡
```

---

## 7. é«˜çº§ç‰¹æ€§

### 7.1 Literalï¼ˆå­—é¢é‡ç±»å‹ï¼‰

```python
from typing import Literal

# ========== åŸºæœ¬ç”¨æ³• ==========
def set_mode(mode: Literal["debug", "release"]) -> None:
    """è®¾ç½®æ¨¡å¼"""
    print(f"Mode: {mode}")

set_mode("debug")    # OK
set_mode("release")  # OK
# set_mode("test")   # é”™è¯¯

# ========== å¤šä¸ªå­—é¢é‡ ==========
LogLevel = Literal["DEBUG", "INFO", "WARNING", "ERROR"]

def log(level: LogLevel, message: str) -> None:
    print(f"[{level}] {message}")

log("INFO", "System started")
```

### 7.2 Finalï¼ˆæœ€ç»ˆå€¼ï¼‰

```python
from typing import Final

# ========== å¸¸é‡ ==========
MAX_CONNECTIONS: Final = 100
DEFAULT_TIMEOUT: Final[int] = 30

# MAX_CONNECTIONS = 200  # ç±»å‹æ£€æŸ¥å™¨ä¼šæŠ¥è­¦å‘Š

# ========== ç±»å±æ€§ ==========
class Config:
    API_KEY: Final[str] = "sk-xxx"
    # API_KEY = "new-key"  # ç±»å‹æ£€æŸ¥å™¨ä¼šæŠ¥è­¦å‘Š
```

### 7.3 TypedDictï¼ˆç±»å‹å­—å…¸ï¼‰

```python
from typing import TypedDict

class User(TypedDict):
    """ç”¨æˆ·ç±»å‹å­—å…¸"""
    id: int
    name: str
    email: str
    age: int

def create_user(name: str, email: str) -> User:
    """åˆ›å»ºç”¨æˆ·"""
    return {
        "id": 1,
        "name": name,
        "email": email,
        "age": 30,
    }

user: User = create_user("Alice", "alice@example.com")
print(user["name"])  # Alice
```

### 7.4 ParamSpecï¼ˆå‚æ•°è§„èŒƒï¼‰

```python
from typing import ParamSpec, Callable

P = ParamSpec('P')

def decorate(func: Callable[P, str]) -> Callable[P, str]:
    """è£…é¥°å™¨"""
    def wrapper(*args: P.args, **kwargs: P.kwargs) -> str:
        return func(*args, **kwargs)
    return wrapper
```

---

## 8. AgentScope ä¸­çš„åº”ç”¨

### 8.1 Agent ç±»å‹æ³¨è§£

```python
from typing import Optional, Dict, Any, List
from agentscope.agent import Agent
from agentscope.message import Msg

class MyAgent:
    """è‡ªå®šä¹‰ Agent"""

    def __init__(
        self,
        name: str,
        model: str,
        system_prompt: str,
    ):
        self.name: str = name
        self.model: str = model
        self.system_prompt: str = system_prompt
        self.memory: List[Msg] = []

    async def query(
        self,
        message: str,
        history: Optional[List[Msg]] = None,
    ) -> str:
        """å¤„ç†æŸ¥è¯¢"""
        if history:
            self.memory.extend(history)

        # å¤„ç†é€»è¾‘
        response: str = f"Response to: {message}"
        return response

    def get_memory(self) -> List[Msg]:
        """è·å–è®°å¿†"""
        return self.memory
```

### 8.2 é…ç½®ç±»å‹æ³¨è§£

```python
from dataclasses import dataclass
from typing import Optional

@dataclass
class ModelConfig:
    """æ¨¡å‹é…ç½®"""
    model_name: str
    api_key: str
    temperature: float = 0.7
    max_tokens: int = 2000
    stream: bool = True

@dataclass
class AgentConfig:
    """Agent é…ç½®"""
    name: str
    system_prompt: str
    model: ModelConfig
    tools: Optional[List[str]] = None

def create_agent(config: AgentConfig) -> Agent:
    """åˆ›å»º Agent"""
    return Agent(
        name=config.name,
        model=config.model.model_name,
        system_prompt=config.system_prompt,
    )
```

### 8.3 æœåŠ¡ç±»å‹æ³¨è§£

```python
from typing import AsyncGenerator, Tuple
from agentscope_runtime.engine.schemas.agent_schemas import AgentRequest

@agent_app.query(framework="agentscope")
async def query_func(
    self,
    msgs: List[Dict[str, Any]],
    request: AgentRequest,
    **kwargs: Any,
) -> AsyncGenerator[Tuple[Msg, bool], None]:
    """æŸ¥è¯¢å¤„ç†å‡½æ•°

    Args:
        msgs: æ¶ˆæ¯åˆ—è¡¨
        request: è¯·æ±‚å¯¹è±¡
        **kwargs: å…¶ä»–å‚æ•°

    Yields:
        (æ¶ˆæ¯, æ˜¯å¦æœ€åä¸€æ¡)
    """
    session_id: str = request.session_id
    user_id: str = request.user_id

    # å¤„ç†é€»è¾‘
    for i in range(3):
        msg = Msg("assistant", f"Response {i}")
        yield msg, (i == 2)  # æœ€åä¸€æ¬¡è¿”å› True
```

---

## 9. ç»ƒä¹ é¢˜åŠç­”æ¡ˆ

### ç»ƒä¹  1ï¼šåŸºç¡€ç±»å‹æ³¨è§£

**é¢˜ç›®ï¼š** ä¸ºä»¥ä¸‹å‡½æ•°æ·»åŠ ç±»å‹æ³¨è§£ã€‚

```python
def divide(a, b):
    return a / b

def greet(name, age):
    return f"{name} is {age} years old"

def get_user_info(user_id):
    if user_id == 1:
        return {"name": "Alice", "age": 30}
    return None
```

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

```python
def divide(a: float, b: float) -> float:
    return a / b

def greet(name: str, age: int) -> str:
    return f"{name} is {age} years old"

from typing import Optional

def get_user_info(user_id: int) -> Optional[dict]:
    if user_id == 1:
        return {"name": "Alice", "age": 30}
    return None
```
</details>

---

### ç»ƒä¹  2ï¼šå®¹å™¨ç±»å‹æ³¨è§£

**é¢˜ç›®ï¼š** ä¸ºä»¥ä¸‹å˜é‡å’Œå‡½æ•°æ·»åŠ ç±»å‹æ³¨è§£ã€‚

```python
numbers = [1, 2, 3, 4, 5]
user_map = {1: "Alice", 2: "Bob"}
point = (10, 20)

def get_names():
    return ["Alice", "Bob", "Charlie"]

def get_config():
    return {"host": "localhost", "port": 8080}
```

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

```python
from typing import List, Dict, Tuple

numbers: List[int] = [1, 2, 3, 4, 5]
user_map: Dict[int, str] = {1: "Alice", 2: "Bob"}
point: Tuple[int, int] = (10, 20)

def get_names() -> List[str]:
    return ["Alice", "Bob", "Charlie"]

def get_config() -> Dict[str, str | int]:
    return {"host": "localhost", "port": 8080}
```
</details>

---

### ç»ƒä¹  3ï¼šæ³›å‹å‡½æ•°

**é¢˜ç›®ï¼š** å®ç°ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œè¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼ã€‚

```python
from typing import TypeVar, List

T = TypeVar('T')

def get_max(items: List[T]) -> T:
    # TODO: å®ç°
    pass
```

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

```python
from typing import TypeVar, List

T = TypeVar('T')

def get_max(items: List[T]) -> T:
    return max(items)
```
</details>

---

### ç»ƒä¹  4ï¼šdataclass

**é¢˜ç›®ï¼š** ä½¿ç”¨ dataclass å®šä¹‰ä¸€ä¸ª User ç±»å‹ã€‚

```python
from dataclasses import dataclass

@dataclass
class User:
    # TODO: æ·»åŠ å­—æ®µ
    pass
```

<details>
<summary>æŸ¥çœ‹ç­”æ¡ˆ</summary>

```python
from dataclasses import dataclass

@dataclass
class User:
    id: int
    name: str
    email: str
    age: int
    is_active: bool = True
```
</details>

---

## 10. æœ€ä½³å®è·µ

### 10.1 ä½•æ—¶ä½¿ç”¨ç±»å‹æ³¨è§£

```python
# âœ… åº”è¯¥ä½¿ç”¨ç±»å‹æ³¨è§£çš„æƒ…å†µ
# 1. å…¬å…± API
def public_api_function(user_id: int) -> dict:
    pass

# 2. å¤æ‚çš„ç±»å‹
def process_data(
    data: list[dict[str, str | int]]
) -> dict[str, list[str]]:
    pass

# 3. å›è°ƒå‡½æ•°
def register_callback(
    callback: Callable[[str], None]
) -> None:
    pass


# âš ï¸ å¯ä»¥çœç•¥ç±»å‹æ³¨è§£çš„æƒ…å†µ
# 1. ç®€å•çš„ç§æœ‰å‡½æ•°
def _add_one(x):
    return x + 1

# 2. ç±»å‹æ˜¾è€Œæ˜“è§
def greet(name):
    return f"Hello, {name}"
```

### 10.2 ç±»å‹æ³¨è§£é£æ ¼

```python
# âœ… å¥½çš„é£æ ¼
from typing import Optional

def get_user(user_id: int) -> Optional[User]:
    """è·å–ç”¨æˆ·

    Args:
        user_id: ç”¨æˆ· ID

    Returns:
        ç”¨æˆ·å¯¹è±¡ï¼Œä¸å­˜åœ¨è¿”å› None
    """
    pass


# âŒ é¿å…è¿‡åº¦æ³¨è§£
def add(a: int, b: int) -> int:
    """a å’Œ b çš„ç±»å‹å·²ç»å¾ˆæ˜æ˜¾"""
    return a + b
```

### 10.3 ç±»å‹æ£€æŸ¥å·¥å…·

```bash
# mypy - é™æ€ç±»å‹æ£€æŸ¥å™¨
pip install mypy
mypy your_file.py

# pyright - Microsoft çš„ç±»å‹æ£€æŸ¥å™¨
pip install pyright
pyright your_file.py
```

---

## âœ… å­¦ä¹ æ£€æŸ¥æ¸…å•

### åŸºç¡€ç±»å‹
- [ ] ç†è§£ç±»å‹æ³¨è§£çš„è¯­æ³•
- [ ] èƒ½å¤Ÿä½¿ç”¨åŸºç¡€ç±»å‹æ³¨è§£
- [ ] èƒ½å¤Ÿä½¿ç”¨å®¹å™¨ç±»å‹æ³¨è§£
- [ ] ç†è§£ Optional çš„ç”¨æ³•

### typing æ¨¡å—
- [ ] ç†è§£ Union ç±»å‹
- [ ] èƒ½å¤Ÿä½¿ç”¨ Callable
- [ ] ç†è§£ Any å’Œ NoReturn
- [ ] èƒ½å¤Ÿä½¿ç”¨ List, Dict, Tuple, Set

### é«˜çº§ç‰¹æ€§
- [ ] ç†è§£æ³›å‹çš„æ¦‚å¿µ
- [ ] èƒ½å¤Ÿå®šä¹‰æ³›å‹å‡½æ•°
- [ ] èƒ½å¤Ÿä½¿ç”¨ dataclass
- [ ] ç†è§£ Protocol çš„ä½œç”¨

### AgentScope åº”ç”¨
- [ ] èƒ½å¤Ÿä¸º Agent æ·»åŠ ç±»å‹æ³¨è§£
- [ ] èƒ½å¤Ÿä¸ºé…ç½®æ·»åŠ ç±»å‹æ³¨è§£
- [ ] èƒ½å¤Ÿä½¿ç”¨ TypedDict

---

**ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼ğŸš€**
