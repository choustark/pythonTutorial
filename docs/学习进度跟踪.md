# AgentScope Python å­¦ä¹ è¿›åº¦è·Ÿè¸ª

> åŸºäº AgentScope å¼€å‘æ‰€éœ€çš„ Python çŸ¥è¯†å­¦ä¹ è®°å½•

---

## ğŸ“Š æ€»ä½“è¿›åº¦

```
å®Œæˆåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 80%

å·²å­¦ä¹ ä¸»é¢˜: 5/6
å‰©ä½™ä¸»é¢˜: 1
```

---

## ğŸ“‹ å­¦ä¹ è·¯çº¿å›¾

```
ç¬¬1å‘¨: Python åŸºç¡€è¯­æ³•        âœ… å·²æŒæ¡
ç¬¬2å‘¨: é¢å‘å¯¹è±¡ç¼–ç¨‹          âœ… å·²æŒæ¡
ç¬¬3å‘¨: å¼‚æ­¥ç¼–ç¨‹             âœ… å·²å­¦ä¹ 
ç¬¬4å‘¨: è£…é¥°å™¨ + ä¸Šä¸‹æ–‡ç®¡ç†å™¨ + ç”Ÿæˆå™¨  âœ… å·²å­¦ä¹ 
ç¬¬5å‘¨: ç¯å¢ƒå˜é‡ + HTTP API   âœ… å·²å­¦ä¹ 
ç¬¬6å‘¨: AgentScope å®æˆ˜       ğŸ”„ è¿›è¡Œä¸­
```

---

## ğŸ“š å·²å®Œæˆä¸»é¢˜è¯¦æƒ…

### 1. Python åŸºç¡€ âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] Python 3.10+ è¯­æ³•
- [x] å˜é‡å’Œæ•°æ®ç±»å‹
- [x] æ§åˆ¶æµï¼ˆif/elseã€for/whileï¼‰
- [x] å‡½æ•°å®šä¹‰å’Œè°ƒç”¨
- [x] åˆ—è¡¨ã€å­—å…¸æ“ä½œ

**æ–‡æ¡£ï¼š** `agentscope_pythonå­¦ä¹ è·¯çº¿.md`

---

### 2. é¢å‘å¯¹è±¡ç¼–ç¨‹ âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] ç±»çš„å®šä¹‰å’Œå®ä¾‹åŒ–
- [x] `__init__` æ„é€ æ–¹æ³•
- [x] `__call__` å¯è°ƒç”¨å¯¹è±¡
- [x] ç»§æ‰¿å’Œå¤šæ€

**æ–‡æ¡£ï¼š** `agentscope_pythonå­¦ä¹ è·¯çº¿.md`

---

### 3. å¼‚æ­¥ç¼–ç¨‹ âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] `async def` å®šä¹‰å¼‚æ­¥å‡½æ•°
- [x] `await` ç­‰å¾…å¼‚æ­¥æ“ä½œ
- [x] `asyncio.run()` è¿è¡Œå¼‚æ­¥ç¨‹åº
- [x] å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ (`async with`)
- [x] å¼‚æ­¥è¿­ä»£å™¨ (`async for`)

**æ–‡æ¡£ï¼š** `agentscope_pythonå­¦ä¹ è·¯çº¿.md`

**å…³é”®ç¤ºä¾‹ï¼š**
```python
async def main():
    agent = ReActAgent(...)
    msg = await agent(msg)

asyncio.run(main())
```

---

### 4. å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] `with` è¯­å¥
- [x] `__enter__` å’Œ `__exit__` æ–¹æ³•
- [x] `async with` å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨
- [x] AgentScope MsgHub çš„ä½¿ç”¨

**æ–‡æ¡£ï¼š** `å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨è¯¦è§£.md`

**å…³é”®ç¤ºä¾‹ï¼š**
```python
async with MsgHub(
    participants=[agent1, agent2, agent3],
    announcement=Msg("Host", "Introduce yourselves.")
) as hub:
    await hub.broadcast(Msg("Host", "Goodbye!"))
```

---

### 5. yield å…³é”®å­—ï¼ˆç”Ÿæˆå™¨ï¼‰âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] `yield` çš„ä½œç”¨
- [x] æš‚åœå’Œæ¢å¤æœºåˆ¶
- [x] å¼‚æ­¥ç”Ÿæˆå™¨ (`async def` + `yield`)
- [x] `async for` è¿­ä»£

**æ–‡æ¡£ï¼š** `yieldå…³é”®å­—è¯¦è§£.md`

**å…³é”®ç¤ºä¾‹ï¼š**
```python
async def async_counter(n: int):
    for i in range(n):
        await asyncio.sleep(1)
        yield i

async for num in async_counter(5):
    print(num)
```

---

### 6. è£…é¥°å™¨ âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] `@decorator` è¯­æ³•
- [x] è£…é¥°å™¨çš„å·¥ä½œåŸç†
- [x] `functools.wraps` çš„ä½¿ç”¨
- [x] å¸¦å‚æ•°çš„è£…é¥°å™¨
- [x] å¼‚æ­¥è£…é¥°å™¨
- [x] AgentScope è£…é¥°å™¨åº”ç”¨

**æ–‡æ¡£ï¼š** `è£…é¥°å™¨è¯¦è§£.md`

**å…³é”®ç¤ºä¾‹ï¼š**
```python
from functools import wraps

def log_decorator(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"è°ƒç”¨ {func.__name__}")
        return func(*args, **kwargs)
    return wrapper

@agent_app.init
async def init_func(self):
    pass
```

---

### 7. ç¯å¢ƒå˜é‡ä¸ HTTP API âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] `os.getenv()` è¯»å–ç¯å¢ƒå˜é‡
- [x] `.env` æ–‡ä»¶å’Œ `python-dotenv`
- [x] `requests` åº“å‘é€è¯·æ±‚
- [x] `httpx` å¼‚æ­¥è¯·æ±‚
- [x] API å®¢æˆ·ç«¯å°è£…

**æ–‡æ¡£ï¼š** `ç¯å¢ƒå˜é‡ä¸HTTP_APIè¯¦è§£.md`

**å…³é”®ç¤ºä¾‹ï¼š**
```python
# ç¯å¢ƒå˜é‡
from dotenv import load_dotenv
import os

load_dotenv()
api_key = os.getenv("DASHSCOPE_API_KEY")

# HTTP API
import httpx

async with httpx.AsyncClient() as client:
    response = await client.get("https://api.github.com")
    return response.json()
```

---

### 8. ç±»å‹æ³¨è§£ âœ…

**æŒæ¡å†…å®¹ï¼š**
- [x] åŸºç¡€ç±»å‹æ³¨è§£
- [x] `typing` æ¨¡å—
- [x] Optionalã€Unionã€Listã€Dict
- [x] æ³›å‹
- [x] dataclass

**æ–‡æ¡£ï¼š** `ç±»å‹æ³¨è§£è¯¦è§£.md`

**å…³é”®ç¤ºä¾‹ï¼š**
```python
from typing import Optional, List

def get_user(user_id: int) -> Optional[dict]:
    return None

@dataclass
class User:
    name: str
    age: int
```

---

## ğŸ“– å­¦ä¹ æ–‡æ¡£åˆ—è¡¨

| æ–‡æ¡£åç§° | å†…å®¹ | çŠ¶æ€ |
|---------|------|------|
| agentscope_pythonå­¦ä¹ è·¯çº¿.md | å®Œæ•´å­¦ä¹ è·¯çº¿ | âœ… å·²ç”Ÿæˆ |
| å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨è¯¦è§£.md | async with è¯¦è§£ | âœ… å·²ç”Ÿæˆ |
| yieldå…³é”®å­—è¯¦è§£.md | ç”Ÿæˆå™¨è¯¦è§£ | âœ… å·²ç”Ÿæˆ |
| è£…é¥°å™¨è¯¦è§£.md | è£…é¥°å™¨å®Œå…¨æŒ‡å— | âœ… å·²ç”Ÿæˆ |
| ç¯å¢ƒå˜é‡ä¸HTTP_APIè¯¦è§£.md | é…ç½®å’ŒAPI | âœ… å·²ç”Ÿæˆ |
| ç±»å‹æ³¨è§£è¯¦è§£.md | ç±»å‹æ³¨è§£æŒ‡å— | âœ… å·²ç”Ÿæˆ |
| æˆ‘çš„_agentscopeå­¦ä¹ è®¡åˆ’.md | å®šåˆ¶å­¦ä¹ è®¡åˆ’ | âœ… å·²ç”Ÿæˆ |

---

## ğŸ¯ AgentScope æ ¸å¿ƒçŸ¥è¯†

### å·²æŒæ¡çš„ AgentScope æ¦‚å¿µ

```python
# ========== 1. Agent åˆ›å»º ==========
from agentscope.agent import ReActAgent
from agentscope.model import DashScopeChatModel

agent = ReActAgent(
    name="assistant",
    model=DashScopeChatModel(
        model_name="qwen-turbo",
        api_key=os.getenv("DASHSCOPE_API_KEY"),
    ),
)

# ========== 2. å¼‚æ­¥è°ƒç”¨ ==========
async def query_agent(message: str):
    response = await agent(message)
    return response

# ========== 3. å¤š Agent åä½œ ==========
async with MsgHub(
    participants=[agent1, agent2, agent3],
    announcement=Msg("Host", "å¼€å§‹è®¨è®º")
) as hub:
    await hub.broadcast(Msg("Host", "ä½ å¥½"))

# ========== 4. æµå¼è¾“å‡º ==========
async for msg, last in stream_printing_messages(
    agents=[agent],
    coroutine_task=agent(message),
):
    yield msg, last

# ========== 5. AgentApp è£…é¥°å™¨ ==========
@agent_app.init
async def init_func(self):
    self.state_service = InMemoryStateService()
    await self.state_service.start()

@agent_app.query(framework="agentscope")
async def query_func(self, msgs, request=None, **kwargs):
    yield "å“åº”", True
```

---

## âœ… æŠ€èƒ½æ£€æŸ¥æ¸…å•

### åŸºç¡€æŠ€èƒ½
- [x] Python åŸºç¡€è¯­æ³•
- [x] é¢å‘å¯¹è±¡ç¼–ç¨‹
- [x] ç±»å’Œå¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µ

### å¼‚æ­¥ç¼–ç¨‹
- [x] async/await è¯­æ³•
- [x] å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨
- [x] å¼‚æ­¥ç”Ÿæˆå™¨

### é«˜çº§ç‰¹æ€§
- [x] è£…é¥°å™¨
- [x] ç”Ÿæˆå™¨
- [x] ç¯å¢ƒå˜é‡ç®¡ç†
- [x] HTTP API è°ƒç”¨
- [x] ç±»å‹æ³¨è§£

### AgentScope
- [x] Agent åˆ›å»º
- [x] å¼‚æ­¥è°ƒç”¨
- [x] MsgHub ä½¿ç”¨
- [x] AgentApp è£…é¥°å™¨
- [x] æµå¼è¾“å‡º

---

## ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®

### 1. å®æˆ˜é¡¹ç›®

å»ºè®®å®Œæˆä»¥ä¸‹å®æˆ˜é¡¹ç›®å·©å›ºçŸ¥è¯†ï¼š

```
é¡¹ç›® 1: ç®€å•èŠå¤©æœºå™¨äºº
â”œâ”€â”€ åˆ›å»º ReActAgent
â”œâ”€â”€ å®ç°å¼‚æ­¥æŸ¥è¯¢
â””â”€â”€ æµå¼è¾“å‡ºå“åº”

é¡¹ç›® 2: å¤šæ™ºèƒ½ä½“å¯¹è¯ç³»ç»Ÿ
â”œâ”€â”€ åˆ›å»ºå¤šä¸ª Agent
â”œâ”€â”€ ä½¿ç”¨ MsgHub ç®¡ç†å¯¹è¯
â””â”€â”€ å®ç°æ¶ˆæ¯å¹¿æ’­

é¡¹ç›® 3: Agent æœåŠ¡éƒ¨ç½²
â”œâ”€â”€ ä½¿ç”¨ AgentApp
â”œâ”€â”€ å®ç°åˆå§‹åŒ–å’ŒæŸ¥è¯¢
â””â”€â”€ HTTP API è°ƒç”¨
```

### 2. æ¨èèµ„æº

- [AgentScope å®˜æ–¹æ–‡æ¡£](https://doc.agentscope.io/)
- [AgentScope GitHub](https://github.com/agentscope-ai/agentscope)
- [Python asyncio æ–‡æ¡£](https://docs.python.org/3.10/library/asyncio.html)

---

## ğŸ“ å­¦ä¹ ç¬”è®°

### é‡è¦æé†’

```
1. å¼‚æ­¥ç¼–ç¨‹æ˜¯ AgentScope çš„æ ¸å¿ƒ
   â†’ ä¸€å®šè¦å¤šç»ƒä¹  async/await

2. è£…é¥°å™¨åœ¨ AgentScope ä¸­å¹¿æ³›ä½¿ç”¨
   â†’ ç†è§£ @agent_app.* çš„ä½œç”¨

3. ç¯å¢ƒå˜é‡ç®¡ç† API å¯†é’¥
   â†’ ä¸è¦ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯

4. ç±»å‹æ³¨è§£æé«˜ä»£ç è´¨é‡
   â†’ å…»æˆæ·»åŠ ç±»å‹æ³¨è§£çš„ä¹ æƒ¯
```

---

## ğŸ‰ å­¦ä¹ æˆå°±

```
âœ… å®Œæˆ 5 ä¸ªä¸»é¢˜å­¦ä¹ 
âœ… ç”Ÿæˆ 7 ä»½å­¦ä¹ æ–‡æ¡£
âœ… æŒæ¡ AgentScope æ ¸å¿ƒæ¦‚å¿µ
âœ… å…·å¤‡å¼€å‘ Agent åº”ç”¨çš„åŸºç¡€èƒ½åŠ›
```

---

**åŠ æ²¹ï¼ç»§ç»­å­¦ä¹  AgentScope å®æˆ˜å§ï¼ğŸš€**
